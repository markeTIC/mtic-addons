<?xml version="1.0"?>
<openerp>
    <data>
        <record id="picking_form_view" model="ir.ui.view">
            <field name="name">sigma2.picking_form_view</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="priority" eval="32" />
            <field name="arch" type="xml">
                <data>
                    <field name="partner_id" position="after">
                        <field name="document_number"/>
                    </field>
                 </data>
            </field>
        </record>

        <record id="stock_picking_tree_view" model="ir.ui.view">
            <field name="name">stock.picking.tree</field>
            <field name="model">stock.picking</field>
            <field name="arch" type="xml">
                <tree colors="blue:state == 'draft';grey:state == 'cancel';red:state not in ('cancel', 'done') and min_date &lt; current_date" string="Picking list">
                    <field name="partner_id"/>
                    <field name="document_number"/>
                    <field name="date"/>
                    <field name="min_date" invisible="1"/>
                    <field name="origin"/>
                    <field name="group_id" invisible="1"/>
                    <field name="backorder_id"/>
                    <field name="state"/>
                    <field name="priority" invisible="1"/>
                    <field name="picking_type_id" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="stock_picking_search_view" model="ir.ui.view">
            <field name="name">sigma2.stock_picking_search_view</field>
            <field name="model">stock.picking</field>
            <field name="arch" type="xml">
                <search string="Albaranes">
                    <field name="document_number"/>
                    <field name="origin"/>
                    <field name="name" string="Referencia interna" filter_domain="[('name','ilike', self)]"/>
                    <filter name="draft" string="Borrador" domain="[('state','=','draft')]"/>
                    <filter name="available" string="Disponible" domain="[('state','in',('assigned', 'partially_available'))]"/>
                    <filter name="waiting" string="Esperando disponibilidad" domain="[('state','=', 'waiting')]"/>
                    <filter name="confirmed" string="Confirmado" domain="[('state','in', ('confirmed', 'waiting', 'assigned'))]"/>
                    <filter name="done" string="Realizado" domain="[('state','=','done')]"/>
                    <separator/>
                    <filter name="reception_to_invoice" string="Pendientes de facturar" domain="[('reception_to_invoice', '=', True), ('invoice_state', '!=', 'invoiced')]"/>
                    <separator/>
                    <filter name="late" string="Retrasados" domain="[('min_date','&lt;', time.strftime('%%Y-%%m-%%d %%H:%%M:%%S'))]" />
                    <separator/>
                    <filter name="backorder" string="Entregas parciales" domain="[('backorder_id','&lt;&gt;', False)]" help="Entregas pendientes de pedidos parcialmente recibidos"/>
                    <field name="partner_id" filter_domain="[('partner_id','child_of',self)]"/>
                    <field name="product_id"/>
                    <field name="picking_type_id"/>
                    <field name="group_id"/>
                    <group expand="0" string="Agrupar por">
                        <filter string="Estado" domain="[]" context="{'group_by':'state'}"/>
                        <filter string="Fecha" domain="[]"  context="{'group_by':'date'}"/>
                        <filter string="Fecha prevista" domain="[]"  context="{'group_by':'min_date'}"/>
                        <filter string="Documento origen" domain="[]" context="{'group_by':'origin'}"/>
                        <filter string="Tipo de albarÃ¡n" domain="[]" context="{'group_by':'picking_type_id'}"/>
                        <filter string="Grupo de abastecimiento" domain="[]" context="{'group_by':'group_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="enter_stock_transfer_details_view" model="ir.ui.view">
            <field name="name">sigma2.enter_stock_transfer_details_view</field>
            <field name="model">stock.transfer_details</field>
            <field name="inherit_id" ref="stock.view_stock_enter_transfer_details"/>
            <field name="priority" eval="32" />
            <field name="arch" type="xml">
                <data>
                    <field name="sourceloc_id" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </field>
                    <field name="destinationloc_id" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </field>
                 </data>
            </field>
        </record>

        <record id="view_stock_invoice_onshipping" model="ir.ui.view">
            <field name="name">sigma2.view_stock_invoice_onshipping</field>
            <field name="model">stock.invoice.onshipping</field>
            <field name="inherit_id" ref="stock_account.view_stock_invoice_onshipping"/>
            <field name="priority" eval="32" />
            <field name="arch" type="xml">
                <data>
                    <!-- field name="invoice_date" position="attributes">
                        <attribute name="string">TOCADO!!!!!</attribute>
                    </field -->
                 </data>
            </field>
        </record>

        <record id="incoming_picking_action" model="ir.actions.act_window">
            <field name="name">Albaranes de compra</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.picking</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('picking_type_code', '=', 'incoming')]</field>
            <field name="context">{}</field>
            <field name="search_view_id" ref="stock_picking_search_view"/>
            <field name="view_id" ref="stock_picking_tree_view"/>
        </record>

        <record id="pending_picking_action" model="ir.actions.act_window">
            <field name="name">Albaranes a recibir</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.picking</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('picking_type_code', '=', 'incoming')]</field>
            <field name="context">{"default_type": "in", "contact_display": "partner_address", "search_default_confirmed": 1}</field>
            <field name="search_view_id" ref="stock_picking_search_view"/>
            <field name="view_id" ref="stock_picking_tree_view"/>
        </record>

        <record id="to_be_invoiced_picking_action" model="ir.actions.act_window">
            <field name="name">Albaranes a facturar</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.picking</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('picking_type_code', '=', 'incoming')]</field>
            <field name="context">{"default_type": "in", "contact_display": "partner_address", "search_default_done": 1, "search_default_reception_to_invoice": 1}</field>
            <field name="search_view_id" ref="stock_picking_search_view"/>
            <field name="view_id" ref="stock_picking_tree_view"/>
        </record>

    </data>
</openerp>

